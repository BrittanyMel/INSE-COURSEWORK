CREATE TABLE UNIVERSITY_USER(
UNI_ID       INTEGER     NOT NULL,
UNI_PASSWORD    CHAR(32)   NOT NULL,
UNI_ATTEND    VARCHAR(50)   NOT NULL,
UNI_COURSE_LEVEL   INTEGER   NOT NULL,
UNI_EMAIL    VARCHAR(50)      NOT NULL,
UNI_FIRST_NAME   VARCHAR(50)  NOT NULL,
UNI_LAST_NAME    VARCHAR(50)	NOT NULL,
PRIMARY KEY(UNI_ID));

CREATE TABLE ACCESS(
SYS_ACCESS     INTEGER		NOT NULL,
SYS_PERMISSION    CHAR(5)	NOT NULL,
SYS_MODIFY_ACCESS    VARCHAR(5),
PRIMARY KEY(SYS_ACCESS));

CREATE TABLE GUEST_USER (
 GUEST_ID INTEGER PRIMARY KEY,
 GUEST_USER_NAME VARCHAR(15) NOT NULL,
 GUEST_USER_PASSWORD VARCHAR(15) NOT NULL,
 COURSE_INTEREST VARCHAR(50) NOT NULL,
 EMAIL VARCHAR(45) NOT NULL,
 FIRST_NAME VARCHAR(45) NOT NULL,
 LAST_NAME VARCHAR(45) NOT NULL);

CREATE TABLE POST(
POST_ID	         INTEGER        PRIMARY KEY,
POST_SUMMARY     VARCHAR(450)   NOT NULL,
POST_DATE        DATE           NOT NULL,
SYS_ACCESS       INTEGER        NOT NULL,
FOREIGN KEY(SYS_ACCESS) REFERENCES ACCESS(SYS_ACCESS));

CREATE TABLE EDIT(
CONTENT_ID              INTEGER           PRIMARY KEY,
CONTENT_SELECT_RATING   VARCHAR(15)       NOT NULL,
CONTENT_COMPOSE_TEXT    VARCHAR(150)      NOT NULL,
CONTENT_ADD_IMAGE       VARCHAR(50)       NOT NULL,
SYS_ACCESS              INTEGER            NOT NULL,
FOREIGN KEY (SYS_ACCESS) REFERENCES POST(SYS_ACCESS));

CREATE TABLE SORT(
SORT_ID		  INTEGER		PRIMARY KEY,
SORT_BY_RATING	  VARCHAR(15),
SORT_BY_LATEST	  VARCHAR(15));


CREATE TABLE REVIEWS(
REVIEW_ID           INTEGER          PRIMARY KEY,
REVIEW_QTY          INTEGER          NOT NULL,
REVIEW_CATEGORY     VARCHAR(50)      NOT NULL,
REVIEW_DATE         DATE             NOT NULL,
REVIEW_CONTENT      VARCHAR(450),
SORT_ID             INTEGER,
FOREIGN KEY(SORT_ID) REFERENCES SORT(SORT_ID));

CREATE TABLE ACCOUNT(
ACC_ID        INTEGER,
DATE_CREATE   DATE   NOT NULL,
GUEST_ID      INTEGER,
UNI_ID        INTEGER,
FOREIGN KEY (GUEST_ID) REFERENCES GUEST_USER(GUEST_ID),
FOREIGN KEY (UNI_ID) REFERENCES UNIVERSITY_USER(UNI_ID));

CREATE TABLE ACCOUNT_HAS_ACCESS (
ACC_ID       INTEGER  NOT NULL,
GUEST_ID     INTEGER  NOT NULL,
UNI_ID       INTEGER  NOT NULL,
SYS_ACCESS   INTEGER  NOT NULL);

CREATE TABLE ASK_QUESTION(
QUESTION_ID           INTEGER    PRIMARY KEY,
QUESTION_LIST_TOPIC   VARCHAR(150),
CONTENT_ID            INTEGER     NOT NULL,
GUEST_ID              INTEGER    NOT NULL,
FOREIGN KEY (CONTENT_ID)REFERENCES EDIT(CONTENT_ID),
FOREIGN KEY(GUEST_ID) REFERENCES GUEST_USER(GUEST_ID));


CREATE TABLE AMEND(
AMEND_ID          INTEGER   PRIMARY KEY,
REVIEW_ID      INTEGER,
QUESTION_ID    INTEGER,
CONSTRAINT FOREIGN KEY(REVIEW_ID) REFERENCES REVIEWS(REVIEW_ID),
CONSTRAINT FOREIGN KEY(QUESTION_ID) REFERENCES ASK_QUESTION(QUESTION_ID));


CREATE TABLE LOGIN (
LOGIN_ID INTEGER PRIMARY KEY,
LOGIN_PASSWORD CHAR(32) NOT NULL,
GUEST_ID   INTEGER    NOT NULL,
UNI_ID     INTEGER    NOT NULL,
FOREIGN KEY(GUEST_ID) REFERENCES GUEST_USER(GUEST_ID),
FOREIGN KEY(UNI_ID) REFERENCES UNIVERSITY_USER(UNI_ID));

CREATE TABLE CATEGORY(
CAT_NAME     VARCHAR(150)    PRIMARY KEY,
CAT_ID       INTEGER         NOT NULL,
CAT_QTY      INTEGER  UNSIGNED 	NOT NULL,
REVIEW_ID    INTEGER,
CONTENT_ID   INTEGER,
AMEND_ID        INTEGER,
SYS_ACCESS   INTEGER,
FOREIGN KEY(REVIEW_ID) REFERENCES REVIEWS(REVIEW_ID),
FOREIGN KEY(CONTENT_ID) REFERENCES EDIT(CONTENT_ID),
FOREIGN KEY(AMEND_ID) REFERENCES AMEND(AMEND_ID),
FOREIGN KEY(SYS_ACCESS) REFERENCES ACCESS(SYS_ACCESS));

CREATE TABLE QUESTION_REPLY(
REPLY_ID      INTEGER       PRIMARY KEY,
REPLY_POST    VARCHAR(500),
QUESTION_ID   INTEGER,
FOREIGN KEY(QUESTION_ID) REFERENCES ASK_QUESTION(QUESTION_ID));

CREATE TABLE DEACTIVATE_REQUEST(
DEACTIVATE_REQUEST INTEGER PRIMARY KEY,
DEACTIVATE_DATE DATETIME,
GUEST_ID          INTEGER,
FOREIGN KEY(GUEST_ID) REFERENCES GUEST_USER(GUEST_ID));

CREATE TABLE SEARCH(
SEARCH_TERM     VARCHAR(150)     PRIMARY KEY,
CAT_NAME        VARCHAR(150),
FOREIGN KEY(CAT_NAME) REFERENCES CATEGORY (CAT_NAME));

CREATE TABLE SITE_ADMIN(
ADMIN_ID INTEGER PRIMARY KEY,
ADMIN_NAME VARCHAR(45) NOT NULL,
REVIEW_ID    INTEGER,
FOREIGN KEY (REVIEW_ID) REFERENCES REVIEWS(REVIEW_ID));

CREATE TABLE ACCESS_HAS_REVIEWS(
SYS_ACCESS     INTEGER,
REVIEW_ID      INTEGER,
FOREIGN KEY(SYS_ACCESS) REFERENCES ACCESS(SYS_ACCESS),
FOREIGN KEY(REVIEW_ID) REFERENCES REVIEWS(REVIEW_ID));
